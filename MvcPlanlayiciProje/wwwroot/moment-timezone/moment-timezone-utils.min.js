!function(n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("./")):"function"==typeof define&&define.amd?define(["moment"],t):t(n.moment)}(this,function(n){"use strict";if(!n.tz)throw new Error("moment-timezone-utils.js must be loaded after moment-timezone.js");var i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX",s=1e-6;function f(n,t){for(var e="",r=Math.abs(n),o=Math.floor(r),t=function(n,t){for(var e,r=".",o="";0<t;)--t,n*=60,e=Math.floor(n+s),r+=i[e],n-=e,e&&(o+=r,r="");return o}(r-o,Math.min(~~t,10));0<o;)e=i[o%60]+e,o=Math.floor(o/60);return n<0&&(e="-"+e),e&&t?e+t:(t||"-"!==e)&&(e||t)||"0"}function a(n){return function(n){if(!n.name)throw new Error("Missing name");if(!n.abbrs)throw new Error("Missing abbrs");if(!n.untils)throw new Error("Missing untils");if(!n.offsets)throw new Error("Missing offsets");if(n.offsets.length!==n.untils.length||n.offsets.length!==n.abbrs.length)throw new Error("Mismatched array lengths")}(n),[n.name,function(n){for(var t,e=0,r=[],o=[],i=[],s={},u=0;u<n.abbrs.length;u++)void 0===s[t=n.abbrs[u]+"|"+n.offsets[u]]&&(r[s[t]=e]=n.abbrs[u],o[e]=f(Math.round(60*n.offsets[u])/60,1),e++),i[u]=f(s[t],0);return r.join(" ")+"|"+o.join(" ")+"|"+i.join("")}(n),function(n){for(var t=[],e=0,r=0;r<n.length-1;r++)t[r]=f(Math.round((n[r]-e)/1e3)/60,1),e=n[r];return t.join(" ")}(n.untils),function(n){if(!n)return"";if(n<1e3)return n;var t=String(0|n).length-2;return Math.round(n/Math.pow(10,t))+"e"+t}(n.population)].join("|")}function l(n){return[n.name,n.zones.join(" ")].join("|")}function c(n,t){var e;if(n.length!==t.length)return!1;for(e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function o(n,t,e,r){for(var o,i,s,u,f,a,l,h=[],p=0;p<n.length;p++){for(f=!1,i=n[p],o=0;o<h.length;o++)s=(u=h[o])[0],l=s,c((a=i).offsets,l.offsets)&&c(a.abbrs,l.abbrs)&&c(a.untils,l.untils)&&(i.population>s.population||i.population===s.population&&r&&r[i.name]?u.unshift(i):u.push(i),f=!0);f||h.push([i])}for(p=0;p<h.length;p++)for(u=h[p],t.push(u[0]),o=1;o<u.length;o++)e.push(u[0].name+"|"+u[o].name)}function h(n,t){var e=[],r=[];return n.links&&(r=n.links.slice()),o(n.zones,e,r,t),{version:n.version,zones:e,links:r.sort()}}function p(n,t,e){var r=Array.prototype.slice,t=function(n,t,e){var r,o,i=0,s=n.length+1;for((e=e||t)<t&&(o=t,t=e,e=o),o=0;o<n.length;o++)null!=n[o]&&((r=new Date(n[o]).getUTCFullYear())<t&&(i=o+1),e<r&&(s=Math.min(s,o+1)));return[i,s]}(n.untils,t,e),e=r.apply(n.untils,t);return e[e.length-1]=null,{name:n.name,abbrs:r.apply(n.abbrs,t),untils:e,offsets:r.apply(n.offsets,t),population:n.population,countries:n.countries}}return n.tz.pack=a,n.tz.packBase60=f,n.tz.createLinks=h,n.tz.filterYears=p,n.tz.filterLinkPack=function(n,t,e,r){for(var o,i=n.zones,s=[],u=0;u<i.length;u++)s[u]=p(i[u],t,e);for(o=h({zones:s,links:n.links.slice(),version:n.version},r),u=0;u<o.zones.length;u++)o.zones[u]=a(o.zones[u]);return o.countries=n.countries?n.countries.map(l):[],o},n.tz.packCountry=l,n});